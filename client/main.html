<head>
    <title>Setlist Generator</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.1.1/normalize.min.css">
    <link href='https://fonts.googleapis.com/css?family=Josefin+Slab:300,700;Ralway:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

</head>

<body>
</body>

<template name="home">
    {{#if currentUser}}
        {{> lists}}
    {{else}}
        <div id="home" class="page">
            <h1><a href="{{pathFor route='home'}}">Setlists</a></h1>
            <div class="login-wrap">
                To get started
                <a href="{{pathFor route='login'}}">Login</a>
                - or -
                <a href="{{pathFor route='register'}}">Register</a>
            </div>
        </div>
    {{/if}}
</template>

<template name="main">
{{#if currentUser}}
<header>
    <div class="row">
        <div class="col">
            <h1>Setlists</h1>
            <button class="toggle-account-menu"><i class="fa fa-user"></i></button>
            <div id="login">
                    {{#if currentUser}}
                    <span class="user">{{currentUser.emails.[0].address}}</span>
                    <a href="#" class="logout">Logout</a>
                    {{else}}
                    <li><a href="{{pathFor route='register'}}">Register</a></li>
                    <li><a href="{{pathFor route='login'}}">Login</a></li>
                    {{/if}}
            </div>
        </div>
    </div>
</header>
{{/if}}

<div id="container">
    {{> yield}}
</div>

{{#if currentUser}}
<footer>
    <div class="row">
        <div class="col">
            {{> navigation}}
        </div>
    </div>
</footer>
{{/if}}
</template>


<template name="navigation">
    <nav>
        <ul>
            <li class="lists {{ activeIfTemplateIs 'home' }}"><a href="{{pathFor route='home'}}"><i class="fa fa-list"></i><span>Setlists</span></a></li>
            <li class="list {{ activeIfTemplateIs 'addList' }}"><a href="{{pathFor route='generate'}}" class=""><i class="fa fa-plus"></i><span>New List</span></a></li>
            <li class="songs {{ activeIfTemplateIs 'songs' }}"><a href="{{pathFor route='songs'}}"><i class="fa fa-music"></i><span>Songs</span></a></li>
        </ul>
    </nav>
</template>

<template name="songs">
    <div id="songs" class="row">
        <div class="col">
            {{#if song.count}}
            {{> addSong}}
            <ul class="song-list">
                {{#each song}}
                {{> songItem}}
                {{/each}}
            </ul>
            {{else}}
                <div class="newSongCallout">
                    <h2>Before you can generate new setlists you'll need to add some songs!</h2>
                    {{> addSong}}
                </div>
            {{/if}}
        </div>
    </div>
</template>

    <template name="songItem">
    <li>
        <div class="inputs">
            <div class="inner">
                <a href="#" class="encore {{checked 'encore'}}"><i class="fa fa-star-o"></i><i class="fa fa-star"></i>Encore</a>
                <input type="text" value="{{songTitle}}" name="songItem" />
            </div>
        </div>
        <a href="#" class="delete-song"><i class="fa fa-trash"></i></a>
    </li>
    </template>

<template name="addSong">
    <div class="addSong">
        <form>
            <label for="song">Add a new song:</label>
            <input type="text" name="songTitle" placeholder="Song Title" required />
        </form>
    </div>
</template>

<template name="addList">
    <div id="addList" class="row">
        <div class="col">
            <h2>New Setlist</h2>
            <form class="addList">
                <p><label>Date of the gig?</label>
                <input type="date" name="gigDate" required /></p>
                <p><label>How many songs? </label>
                <input type="number" name="numberOfSongs" min="2" placeholder="Minimum of 2 or leave blank to include all songs" /><br /></p>
                <p><label>Venue</label>
                    <input type="text" name="venueName" placeholder="Mac's Bar" />
                </p>
                <input type="submit" name="generateSetlist" value="Generate Setlist" />
            </form>
        </div>
    </div>
</template>

<template name="lists">
<div id="lists" class="row">
    <div class="col">
    {{#if Template.subscriptionsReady}}
        {{#if list.count}}
            <ul class="gig-list">
                {{#each list}}
                    <li><a href="/list/{{_id}}"><span>{{formatDate gigDate}} <strong>@ {{venueName}}</strong></span> {{theList.length}} Songs</a> <a href="#" class="delete-list"><i class="fa fa-trash"></i></a></li>
                {{/each}}
            </ul>
        {{else}}
            <div class="newListCallout">
                Generate a new list to start rocking!
                <a href="{{pathFor route='generate'}}"><i class="fa fa-plus"></i></a>
            </div>
        {{/if}}
    {{else}}
        {{> loading}}
    {{/if}}
    </div>
</div>
</template>

<template name="listPage">
<div id="list" class="row page">
    <div class="col">
        <h2>{{formatDate gigDate}} {{#if venueName}} <strong>@ {{venueName}}</strong>{{/if}}</h2>
        <ul>
            {{#each theList}}
            <li>{{songTitle}}</li>
            {{/each}}
        </ul>
        <a href="#" class="btn">Send To Bandmates</a>
    </div>
</div>
</template>

<template name="register">
<div class="page">
    <h1><a href="{{pathFor route='home'}}">Setlists</a></h1>

    <div class="login-wrap">
        <h2>Register</h2>
        <form class="register">
            <p><label for="email">Email:</label> <input type="email" id="email" name="email" placeholder="Email" required /></p>
            <p><label for="password">Password:</label> <input type="password" id="password" name="password" placeholder="Password" required /></p>
            <p><input type="submit" value="Register"></p>
        </form>
    </div>
</div>
</template>

<template name="login">
<div class="page">
    <h1><a href="{{pathFor route='home'}}">Setlists</a></h1>

    <div class="login-wrap">
        <h2>Login</h2>
        <form class="login">
            <p><label for="email">Email:</label> <input type="email" id="email" name="email" placeholder="Email" required /></p>
            <p><label for="password">Password:</label> <input type="password" id="password" name="password" placeholder="Password" required /></p>
            <p><input type="submit" value="Login"></p>
        </form>
    </div>
</div>
</template>

<template name="loading">
<p>Loading...</p>
</template>
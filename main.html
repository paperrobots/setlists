<head>
    <title>Setlist Generator</title>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
</head>

<body>
</body>

<template name="home">
    <h2>Welcome to the Setlist Generator.</h2>
    {{#unless currentUser}}
        <p>Please <a href="{{pathFor route='login'}}">Login</a> or <a href="{{pathFor route='register'}}">Register</a> to get started!</p>
    {{/unless}}

    {{#if currentUser}}
        {{> lists}}
    {{/if}}
</template>

<template name="main">
    <header>
        <h1>Setlist Generator</h1>

    </header>

    {{> yield}}

    <footer>
        {{> navigation}}
    </footer>
</template>


<template name="navigation">
    <nav>
        <ul>
            <li><a href="{{pathFor route='home'}}">Home</a></li>
            {{#if currentUser}}
                <li><a href="{{pathFor route='songs'}}">Songs</a></li>
                <li><a href="{{pathFor route='generate'}}">New List</a></li>
                <li><a href="#" class="logout">Logout ({{currentUser.emails.[0].address}})</a></li>
            {{else}}
                <li><a href="{{pathFor route='register'}}">Register</a></li>
                <li><a href="{{pathFor route='login'}}">Login</a></li>
            {{/if}}
        </ul>
    </nav>
</template>

<template name="songs">
    {{> addSong}}
    <ul>
        {{#each song}}
            {{> songItem}}
        {{/each}}
    </ul>
</template>

<template name="songItem">
    <li>
        <input type="radio" name="stickyOpener" value="opener" {{checked 'opener'}} /> opener
        <input type="radio" name="stickyCloser" value="closer" {{checked 'closer'}} /> closer
        <input type="input" value="{{songTitle}}" name="songItem" />
        [<a href="#" class="delete-song">X</a>]
    </li>
</template>

<template name="addSong">
    <form>
        <label for="song">Add a new song:</label>
        <input type="text" name="songTitle" placeholder="Song Title" required />
    </form>
</template>

<template name="addList">
    <form class="addList">
        <p><label>Date of the gig?</label><br />
        <input type="date" name="gigDate" required /></p>
        <p><label>How many songs? Minimum of 2 or leave blank to include all songs</label><br />
        <input type="number" name="numberOfSongs" min="2" placeholder="All" /><br /></p>
        <p><label>Venue (optional)</label>
        <input type="text" name="venueName" placeholder="Mac's Bar" />
        </p>
        <input type="submit" name="generateSetlist" value="Generate Setlist" />
    </form>
</template>

<template name="lists">
    <h2>Setlists</h2>
    <ul>
    {{#if Template.subscriptionsReady}}
        {{#each list}}
            <li><a href="/list/{{_id}}">{{gigDate}} @ {{venueName}}</a> - [<a href="#" class="delete-list">X</a>]</li>
        {{/each}}
    {{else}}
        {{> loading}}
    {{/if}}
    </ul>
</template>

<template name="listPage">
    <h2>Setlist: {{gigDate}} @ {{venueName}}</h2>
    <ul>
    {{#each theList}}
        <li>{{songTitle}}</li>
    {{/each}}
    </ul>
</template>

<template name="register">
    <h2>Register</h2>
    <form class="register">
        <p>Email: <input type="email" name="email" required /></p>
        <p>Password: <input type="password" name="password" required /></p>
        <p><input type="submit" value="Register"></p>
    </form>
</template>

<template name="login">
    <h2>Login</h2>
    <form class="login">
        <p>Email: <input type="email" name="email" required /></p>
        <p>Password: <input type="password" name="password" required /></p>
        <p><input type="submit" value="Login"></p>
    </form>
</template>

<template name="loading">
    <p>Loading...</p>
</template>

